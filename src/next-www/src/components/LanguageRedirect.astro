---
/**
 * 客户端语言检测后备方案
 * 如果服务端检测失败，在客户端通过 navigator.language 再次检测
 */
---

<script>
  // 仅在根路径执行
  if (window.location.pathname === '/') {
    // 检查浏览器语言
    const browserLang = navigator.language || (navigator as any).userLanguage;
    console.log('[Client Language Detection] Browser language:', browserLang);
    
    // 检测是否为中文
    const isChinese = browserLang.toLowerCase().startsWith('zh');
    console.log('[Client Language Detection] Is Chinese:', isChinese);
    
    // 重定向到对应语言版本
    const targetLocale = isChinese ? 'zh-cn' : 'en';
    console.log('[Client Language Detection] Redirecting to:', `/${targetLocale}/`);
    
    window.location.href = `/${targetLocale}/`;
  }
</script>

